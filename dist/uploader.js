var uploader;(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Uploader:()=>a});const n=(e,t)=>Object.prototype.toString.call(e)===t,o=e=>{throw new Error(e)},r=e=>n(e,"[object String]"),s=e=>n(e,"[object Boolean]"),i=e=>n(e,"[object Function]");function a(e,t){const a=Object.assign({},{name:"file",disabled:!1,headers:{},multiple:!1,withCredentials:!1},t),{action:c,accept:l,name:u,disabled:d,headers:p,multiple:f,withCredentials:b,customRequest:h,onChange:g,onProgress:m,onSuccess:y,onError:w}=a;function S(){c&&r(c)||o("action is not a string!"),l&&!r(l)&&o("accept is not a string!"),u&&!r(u)&&o("name is not a string!"),d&&!s(d)&&o("disabled is not a boolean!"),p&&!n(p,"[object Object]")&&o("headers is not a object!"),f&&!s(f)&&o("multiple is not a boolean!"),b&&!s(b)&&o("withCredentials is not a boolean!"),h&&!i(h)&&o("customRequest is not a function!"),g&&!i(g)&&o("onChange is not a function!"),m&&!i(m)&&o("onProgress is not a function!"),y&&!i(y)&&o("onSuccess is not a function!"),w&&!i(w)&&o("onError is not a function!")}function j(e){!function(e){if("undefined"==typeof XMLHttpRequest)return;const t=new XMLHttpRequest,n=e.action;t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});const o=new FormData;o.append(e.filename,e.file,e.file.name),t.onerror=function(t){e.onError(t)},t.onload=function(){if(t.status<200||t.status>=300)return e.onError(function(e,t,n){let o;o=n.response?`${n.response.error||n.response}`:n.responseText?`${n.responseText}`:`fail to post ${e} ${n.status}`;const r=new Error(o);return r.status=n.status,r.method="post",r.url=e,r}(n,0,t));e.onSuccess(function(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(e){return t}}(t))},t.open("post",n,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const r=e.headers;for(let e in r)r.hasOwnProperty(e)&&null!==r[e]&&t.setRequestHeader(e,r[e]);t.send(o)}({action:c,file:e,filename:u,headers:p,withCredentials:b,onProgress:t=>{m(t,e)},onSuccess:t=>{y(t,e)},onError:t=>{w(t,e)}})}try{S(),function(e){const t=document.createElement("input");t.id="uploader",t.style.display="none",t.setAttribute("type","file"),l&&t.setAttribute("accept",l),d&&t.setAttribute("disabled",d),f&&t.setAttribute("multiple",f),t.addEventListener("change",(e=>function(e){const t=e.target.files;if(!t)return;let n=Array.prototype.slice.call(t);(function(e){if(h)return h(e);for(const t of e)j(t)})(n),g(n)}(e))),e.appendChild(t),e.addEventListener("click",(()=>t.click()))}(e)}catch(e){console.error(e)}return{get disabled(){return a.disabled},set disabled(e){!function(e,t,n){a.hasOwnProperty(e)&&(a[e]=t),S(),document.querySelector("#uploader").setAttribute(e,t)}("disabled",e)}}}uploader=t})();